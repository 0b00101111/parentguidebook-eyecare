---
import type { Lang } from '../../i18n/ui';
import { useTranslations } from '../../i18n/utils';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { CATEGORIES } from '../../config/domains';
import { getCategoryPath } from '../../utils/routes';

export async function getStaticPaths() {
  return [{ params: { lang: 'en' } }, { params: { lang: 'zh' } }];
}

const { lang } = Astro.params as { lang: Lang };
const t = useTranslations(lang);
const canonicalPath = `/${lang}/`;
---

<BaseLayout
  lang={lang}
  title="Parent Guidebook"
  description="A free, bilingual guide to raising a whole, healthy, resilient child."
  canonicalPath={canonicalPath}
>
  <section class="landing-hero">
    <h1 class="landing-hero__title">Parent Guidebook</h1>
    <p class="landing-hero__sub">
      {lang === 'en'
        ? 'A free, bilingual guide to raising a whole, healthy, resilient child in a complex world.'
        : '一份免费的、双语指南，帮助你在复杂的世界里养育全面、健康、有韧性的孩子。'}
    </p>
  </section>

  <section class="landing-section">
    <h2 class="landing-section__title">
      {lang === 'en' ? 'Explore by area' : '按领域浏览'}
    </h2>
    <div class="landing-grid">
      {CATEGORIES.map((cat) => (
        <a class="landing-card landing-card--category" href={getCategoryPath(lang, cat.slug)}>
          <div class="landing-card__title">{t(cat.labelKey as any)}</div>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>
